<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CODE98 · FIFO Payouts Engine</title>
    <!-- Inter font - professional, clean -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,400;0,14..32,500;0,14..32,600;0,14..32,700;1,14..32,400&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: #f5f7fa;
            color: #1e293b;
            line-height: 1.5;
            -webkit-font-smoothing: antialiased;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        /* Navigation */
        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.5rem 0;
            border-bottom: 1px solid #e9edf2;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: 700;
            letter-spacing: -0.02em;
            background: linear-gradient(135deg, #1A3F2B, #005C99);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .nav-links {
            display: flex;
            gap: 2.5rem;
        }

        .nav-links a {
            text-decoration: none;
            color: #475569;
            font-weight: 500;
            font-size: 0.95rem;
            cursor: pointer;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid transparent;
            transition: all 0.2s;
        }

        .nav-links a:hover {
            color: #005C99;
        }

        .nav-links a.active {
            color: #005C99;
            border-bottom: 2px solid #005C99;
        }

        /* Hero Section */
        .hero {
            padding: 3.5rem 0 2rem;
            text-align: left;
            max-width: 800px;
        }

        .hero h1 {
            font-size: 3.2rem;
            font-weight: 700;
            letter-spacing: -0.02em;
            line-height: 1.2;
            background: linear-gradient(135deg, #1A3F2B, #005C99, #003366);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 1rem;
        }

        .hero p {
            font-size: 1.2rem;
            color: #475569;
            margin-bottom: 1.5rem;
        }

        .hero-badge {
            display: inline-block;
            background: #e9f0f9;
            color: #005C99;
            padding: 0.4rem 1.2rem;
            border-radius: 100px;
            font-weight: 600;
            font-size: 0.85rem;
            margin-bottom: 1.5rem;
            border: 1px solid rgba(0,92,153,0.1);
        }

        /* Amount Selection Grid - Client Focused */
        .selection-panel {
            background: white;
            border-radius: 2rem;
            padding: 2.5rem;
            box-shadow: 0 20px 40px -12px rgba(0,0,0,0.08);
            margin: 2rem 0 3rem;
            border: 1px solid #eef2f6;
        }

        .panel-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 0.5rem;
        }

        .panel-subtitle {
            color: #64748b;
            margin-bottom: 2rem;
            font-size: 1rem;
        }

        .amount-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(110px, 1fr));
            gap: 1rem;
            margin: 2rem 0 0.5rem;
        }

        .amount-card {
            background: white;
            border: 1.5px solid #e2e8f0;
            border-radius: 1.5rem;
            padding: 1.25rem 0.5rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
            overflow: hidden;
        }

        .amount-card:hover {
            border-color: #005C99;
            transform: translateY(-2px);
            box-shadow: 0 10px 20px -10px rgba(0,92,153,0.2);
        }

        .amount-card.selected {
            border: 2px solid #005C99;
            background: linear-gradient(to bottom, #f8fbff, white);
        }

        .amount-card .currency {
            font-size: 0.8rem;
            color: #64748b;
            font-weight: 500;
        }

        .amount-card .value {
            font-size: 2rem;
            font-weight: 700;
            color: #1e293b;
            line-height: 1.2;
        }

        .amount-card .value small {
            font-size: 1rem;
            font-weight: 400;
            color: #64748b;
        }

        .amount-card .badge-payout {
            background: #e9f0f9;
            color: #005C99;
            font-size: 0.7rem;
            font-weight: 600;
            padding: 0.2rem 0.8rem;
            border-radius: 40px;
            display: inline-block;
            margin-top: 0.5rem;
        }

        /* M-Pesa Green & Co-op Bank Blue gradient accents */
        .amount-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #1A3F2B, #005C99);
            opacity: 0;
            transition: opacity 0.2s;
        }

        .amount-card:hover::before {
            opacity: 1;
        }

        /* Action Panel */
        .action-panel {
            background: linear-gradient(135deg, #f8fafc, #ffffff);
            border-radius: 1.5rem;
            padding: 2rem;
            margin-top: 2rem;
            border: 1px solid #eef2f6;
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            justify-content: space-between;
            gap: 1.5rem;
        }

        .selected-info {
            display: flex;
            align-items: center;
            gap: 1.5rem;
            flex-wrap: wrap;
        }

        .selected-amount-box {
            background: #005C99;
            color: white;
            padding: 0.75rem 2rem;
            border-radius: 3rem;
            font-weight: 600;
            font-size: 1.2rem;
        }

        .selected-amount-box span {
            font-weight: 700;
            font-size: 1.8rem;
            margin-left: 0.5rem;
        }

        .payout-info {
            color: #475569;
        }

        .payout-info strong {
            color: #1A3F2B;
        }

        .pay-button {
            background: #1A3F2B;
            color: white;
            border: none;
            padding: 1rem 3rem;
            border-radius: 3rem;
            font-weight: 600;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 8px 16px -8px rgba(26,63,43,0.3);
            border: 1px solid rgba(255,255,255,0.1);
        }

        .pay-button:hover {
            background: #0f2e1f;
            transform: translateY(-2px);
            box-shadow: 0 12px 20px -10px rgba(26,63,43,0.4);
        }

        .pay-button:active {
            transform: translateY(0);
        }

        /* Protocol Section */
        .protocol-section {
            background: white;
            border-radius: 2rem;
            padding: 3rem;
            margin: 3rem 0;
            border: 1px solid #eef2f6;
        }

        .protocol-section h2 {
            font-size: 2rem;
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 1.5rem;
        }

        .protocol-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
            margin: 2rem 0;
        }

        .protocol-item {
            padding: 1.5rem;
            background: #f8fafc;
            border-radius: 1.5rem;
            border-left: 4px solid #005C99;
        }

        .protocol-item h3 {
            font-weight: 600;
            margin-bottom: 0.75rem;
            color: #1A3F2B;
        }

        .protocol-item p {
            color: #475569;
            font-size: 0.95rem;
        }

        .invariant-box {
            background: linear-gradient(135deg, #f0f5ff, #ffffff);
            border-radius: 1.5rem;
            padding: 2rem;
            margin-top: 2rem;
            border: 1px solid #cbd5e1;
        }

        .invariant-box p {
            font-size: 1.1rem;
            color: #1e293b;
        }

        .invariant-box .emphasis {
            color: #005C99;
            font-weight: 600;
        }

        /* Partners Footer */
        .partners {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 3rem;
            flex-wrap: wrap;
            margin: 3rem 0 2rem;
            padding: 2rem 0;
            border-top: 1px solid #e9edf2;
            border-bottom: 1px solid #e9edf2;
        }

        .partner-logo {
            height: 40px;
            object-fit: contain;
            filter: grayscale(0.3);
            opacity: 0.8;
            transition: all 0.2s;
        }

        .partner-logo:hover {
            filter: grayscale(0);
            opacity: 1;
        }

        /* SVG logos as inline to avoid external requests */
        .mpesa-logo {
            width: 120px;
            height: 40px;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 60"><path fill="%231A3F2B" d="M30 15c-8.3 0-15 6.7-15 15s6.7 15 15 15 15-6.7 15-15-6.7-15-15-15zm0 24c-5 0-9-4-9-9s4-9 9-9 9 4 9 9-4 9-9 9z"/><path fill="%231A3F2B" d="M70 25h-8v-8h-6v8h-8v6h8v8h6v-8h8v-6zM100 15c-8.3 0-15 6.7-15 15s6.7 15 15 15 15-6.7 15-15-6.7-15-15-15zm0 24c-5 0-9-4-9-9s4-9 9-9 9 4 9 9-4 9-9 9zM140 25h-8v-8h-6v8h-8v6h8v8h6v-8h8v-6zM170 15c-8.3 0-15 6.7-15 15s6.7 15 15 15 15-6.7 15-15-6.7-15-15-15zm0 24c-5 0-9-4-9-9s4-9 9-9 9 4 9 9-4 9-9 9z"/><text x="30" y="55" font-family="Arial" font-size="8" fill="%231A3F2B">M-PESA</text></svg>') no-repeat center;
            background-size: contain;
        }

        .coop-logo {
            width: 140px;
            height: 40px;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 60"><rect width="200" height="60" fill="%23005C99" opacity="0.1"/><path fill="%23005C99" d="M40 20h20v20H40z"/><text x="70" y="40" font-family="Arial" font-size="14" font-weight="bold" fill="%23005C99">Co-op Bank</text></svg>') no-repeat center;
            background-size: contain;
        }

        .intasend-logo {
            width: 140px;
            height: 40px;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 60"><path fill="%23334155" d="M30 20l15 20-15 20h20l15-20-15-20H30z"/><text x="70" y="40" font-family="Arial" font-size="14" font-weight="bold" fill="%23334155">IntaSend</text></svg>') no-repeat center;
            background-size: contain;
        }

        /* Terms Pages */
        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        .legal-content {
            max-width: 900px;
            margin: 3rem auto;
            background: white;
            padding: 3rem;
            border-radius: 2rem;
            box-shadow: 0 20px 40px -12px rgba(0,0,0,0.08);
        }

        .legal-content h1 {
            font-size: 2.5rem;
            font-weight: 600;
            margin-bottom: 2rem;
            color: #1e293b;
        }

        .legal-content h2 {
            font-size: 1.5rem;
            font-weight: 600;
            margin: 2rem 0 1rem;
            color: #005C99;
        }

        .legal-content p {
            color: #475569;
            margin-bottom: 1rem;
            line-height: 1.7;
        }

        footer {
            text-align: center;
            padding: 2rem 0 3rem;
            color: #64748b;
            font-size: 0.9rem;
        }

        @media (max-width: 700px) {
            .hero h1 { font-size: 2.4rem; }
            .action-panel { flex-direction: column; align-items: stretch; }
            .selected-info { justify-content: center; }
            .amount-grid { grid-template-columns: repeat(3, 1fr); }
        }

        @media (max-width: 480px) {
            .amount-grid { grid-template-columns: repeat(2, 1fr); }
        }
    </style>
</head>
<body>
    <div class="container">
        <nav>
            <div class="logo">CODE98</div>
            <div class="nav-links">
                <a onclick="showPage('home')" class="active" id="nav-home">Engine</a>
                <a onclick="showPage('terms')" id="nav-terms">Terms</a>
                <a onclick="showPage('partners')" id="nav-partners">Infrastructure</a>
            </div>
        </nav>

        <!-- HOME PAGE -->
        <div id="page-home" class="page active">
            <div class="hero">
                <div class="hero-badge">CODE98 FIFO PAYOUTS ENGINE</div>
                <h1>First-In, First-Out<br>Queue Protocol</h1>
                <p>Institutional-grade settlement with strict chronological ordering. Select your amount below.</p>
            </div>

            <!-- Client-Focused Selection Panel -->
            <div class="selection-panel">
                <div class="panel-title">Select payment amount</div>
                <div class="panel-subtitle">Choose from fixed denominations — each maintains an independent FIFO queue</div>
                
                <div class="amount-grid" id="amountGrid">
                    <!-- Amount cards generated by JavaScript -->
                </div>

                <div class="action-panel">
                    <div class="selected-info">
                        <div class="selected-amount-box" id="selectedAmountDisplay">
                            <span id="selectedValue">—</span> KES
                        </div>
                        <div class="payout-info" id="payoutInfo">
                            Select an amount to view payout
                        </div>
                    </div>
                    <button class="pay-button" id="payButton" onclick="processPayment()">Pay Now →</button>
                </div>
            </div>

            <!-- Protocol Explanation -->
            <div class="protocol-section">
                <h2>Strict-Order Queue Protocol</h2>
                <div class="protocol-grid">
                    <div class="protocol-item">
                        <h3>Denomination Isolation</h3>
                        <p>Each amount (50, 100, 200, etc.) operates as an independent queue. No cross-amount mixing or aggregation.</p>
                    </div>
                    <div class="protocol-item">
                        <h3>Chronological Order</h3>
                        <p>Participants appended strictly by arrival time. The nth participant settles immediately after the (n-1)th.</p>
                    </div>
                    <div class="protocol-item">
                        <h3>Atomic Disbursement</h3>
                        <p>When a queue reaches two participants, the head settles instantly — return to customer plus administrative fee.</p>
                    </div>
                </div>
                <div class="invariant-box">
                    <p><span class="emphasis">⏳ Invariant:</span> First-In, First-Out across every denomination. No reordering, no prioritization, no preemption. Cryptographic ordering ensures auditability.</p>
                    <p style="margin-top: 1rem; color: #64748b;">System commits within milliseconds; external mobile money latency may affect final visibility.</p>
                </div>
            </div>
        </div>

        <!-- TERMS PAGE -->
        <div id="page-terms" class="page">
            <div class="legal-content">
                <h1>Terms & Queue Protocol</h1>
                <div style="background: #f1f5f9; padding: 1rem 1.5rem; border-radius: 1rem; margin-bottom: 2rem;">
                    Version 4.2.1 · March 2026
                </div>
                
                <h2>1. Definitions</h2>
                <p><strong>Code98</strong> refers to the proprietary queue-based settlement engine. <strong>Participant</strong> means any individual or entity that initiates a consideration transfer to any Code98-designated payment instrument. <strong>FIFO Queue</strong> means a first-in, first-out chronological container where consideration events are ordered exclusively by system receipt timestamp. <strong>Denomination-Specific Ledger</strong> refers to the discrete queue maintained for each precise consideration amount.</p>
                
                <h2>2. Queue Formation</h2>
                <p>Upon successful validation of an incoming consideration, the participant is irrevocably appended to the tail of the queue corresponding to the exact amount remitted. Each denomination operates autonomously — no cross-denomination aggregation, substitution, or priority inversion is permitted. The chronological order is cryptographically sealed at the moment of enqueuing.</p>
                
                <h2>3. Settlement Trigger</h2>
                <p>A disbursement event for the head of any queue is triggered automatically upon detection of a subsequent enqueuing within the same denomination. The instruction comprises two simultaneous components: return consideration to the original participant, and administrative fee to the designated operational account. Both execute atomically where infrastructure permits.</p>
                
                <h2>4. Denomination Integrity</h2>
                <p>The system enforces strict denomination integrity: a consideration of 50 KES can only be paired with another 50 KES consideration. This ensures the probabilistic payout model remains mathematically consistent and administratively predictable.</p>
                
                <h2>5. Administrative Fee</h2>
                <p>The administrative fee deducted from each disbursement is fixed per denomination as published in the interface. This compensates Code98 for queue infrastructure, regulatory compliance, audit trails, and payment partner integration.</p>
                
                <h2>6. Disclaimer</h2>
                <p>The Code98 system is provided on an "as is" and "as available" basis. Code98 makes no representations or warranties regarding operation, availability, or timeliness. To the fullest extent permitted by law, Code98 shall not be liable for indirect, incidental, or consequential damages arising from delays in disbursement or inability to access queues.</p>
                
                <h2>7. Governing Law</h2>
                <p>This Agreement shall be governed by the laws of the Republic of Kenya. Disputes shall first be referred to mediation under Nairobi Centre for International Arbitration rules.</p>
                
                <p style="margin-top: 3rem; font-style: italic;">By proceeding with any payment, you affirm that you have read, understood, and agree to be bound by these terms.</p>
            </div>
        </div>

        <!-- INFRASTRUCTURE PAGE -->
        <div id="page-partners" class="page">
            <div class="legal-content">
                <h1>Infrastructure Partners</h1>
                <div style="background: #f1f5f9; padding: 1rem 1.5rem; border-radius: 1rem; margin-bottom: 2rem;">
                    Institutional-Grade Settlement Layer
                </div>
                
                <h2>Primary Processing</h2>
                <p>Code98's settlement layer is built atop <strong>IntaSend</strong> (PCI-DSS Level 1 certified), which facilitates collection and disbursement to mobile money wallets across East Africa. All value transfers are processed under bank-grade security with full encryption and auditability.</p>
                
                <h2>Mobile Money Connectivity</h2>
                <p>For M-PESA transactions, IntaSend maintains direct integration with Safaricom's Daraja API, supplemented by redundant fallback aggregators. Settlement finality is subject to Safaricom's terms of use and clearing schedules.</p>
                
                <h2>Queue Orchestration</h2>
                <p>The proprietary FIFO engine resides on Code98 infrastructure, isolated from payment providers. It communicates via authenticated webhooks and idempotent transaction calls, ensuring exactly-once disbursement. Daily reconciliation employs cryptographic hash chains linking queue events to corresponding disbursements.</p>
                
                <h2>Regulatory Compliance</h2>
                <p>Code98 operates in alignment with the National Payment System Act and Central Bank of Kenya guidelines. Funds at no time reside in unregulated custody — they are either in transit via licensed payment rails or disbursed per queue logic.</p>
                
                <h2>Business Continuity</h2>
                <p>Infrastructure is distributed across multiple availability zones with automated failover. In the event of provider outage, queues are preserved and settlement resumes automatically upon restoration.</p>
            </div>
        </div>

        <!-- Partners Footer (visible on all pages) -->
        <div class="partners">
            <div class="mpesa-logo" title="M-PESA"></div>
            <div class="coop-logo" title="Co-operative Bank"></div>
            <div class="intasend-logo" title="IntaSend"></div>
        </div>

        <footer>
            <p>© 2026 CODE98 · FIFO Payouts Engine</p>
            <p style="margin-top: 0.5rem;">M-PESA, Co-op Bank and IntaSend are independent third-party providers</p>
        </footer>
    </div>

    <script>
        // Amount data with payout rules
        const amounts = [
            { value: 50, payout: 70, badge: 'S50' },
            { value: 100, payout: 70, badge: 'S100' },
            { value: 200, payout: 160, badge: 'S200' },
            { value: 500, payout: 400, badge: 'S500' },
            { value: 1000, payout: 800, badge: 'S1000' },
            { value: 2500, payout: 2000, badge: 'G2.5' },
            { value: 3500, payout: 2800, badge: 'G3.5' },
            { value: 5000, payout: 4000, badge: 'P5' },
            { value: 6000, payout: 4800, badge: 'P6' },
            { value: 12000, payout: 9600, badge: 'D12' },
            { value: 20000, payout: 16000, badge: 'D20' },
            { value: 25000, payout: 20000, badge: 'D25' }
        ];

        // Payment links mapping
        const paymentLinks = {
            50: 'https://payment.intasend.com/pay/546fc0c8-90ed-4ab7-993c-20090b1abf5a/',
            100: 'https://payment.intasend.com/pay/dacd9044-be87-44be-840b-81def14883a0/',
            200: 'https://payment.intasend.com/pay/86b8851f-de85-41b1-8783-a74711acdcae/',
            500: 'https://payment.intasend.com/pay/08c472bf-5e30-49ca-84ab-c85812631552/',
            1000: 'https://payment.intasend.com/pay/ed9306c5-5627-40cd-93a0-51211311e1e9/',
            2500: 'https://payment.intasend.com/pay/c17af73c-170d-4355-9bd2-c934ec056118/',
            3500: 'https://payment.intasend.com/pay/4be85231-045e-4420-8526-8066e9fdd4e4/',
            5000: 'https://payment.intasend.com/pay/368911cc-c54a-4ac6-9624-776dbe128eef/',
            6000: 'https://payment.intasend.com/pay/d0414250-2e3b-4681-8ccf-cd7725a44960/',
            12000: 'https://payment.intasend.com/pay/caa15110-edb9-4598-a30d-50c7054caf16/',
            20000: 'https://payment.intasend.com/pay/3e64f9d2-779e-443c-b93b-81687a8724da/',
            25000: 'https://payment.intasend.com/pay/9772c9c1-90a6-4101-a95c-8ac8f6abffe6/'
        };

        let selectedAmount = null;

        // Generate amount cards
        function generateAmountGrid() {
            const grid = document.getElementById('amountGrid');
            grid.innerHTML = '';

            amounts.forEach(amt => {
                const card = document.createElement('div');
                card.className = 'amount-card';
                card.setAttribute('data-amount', amt.value);
                card.onclick = () => selectAmount(amt.value);
                
                card.innerHTML = `
                    <div class="currency">KES</div>
                    <div class="value">${amt.value.toLocaleString()}</div>
                    <div class="badge-payout">pays ${amt.payout.toLocaleString()}</div>
                `;
                
                grid.appendChild(card);
            });
        }

        // Handle amount selection
        function selectAmount(amount) {
            selectedAmount = amount;
            
            // Update UI
            document.querySelectorAll('.amount-card').forEach(card => {
                card.classList.remove('selected');
                if (parseInt(card.getAttribute('data-amount')) === amount) {
                    card.classList.add('selected');
                }
            });

            // Update display
            document.getElementById('selectedValue').textContent = amount.toLocaleString();
            
            const selected = amounts.find(a => a.value === amount);
            document.getElementById('payoutInfo').innerHTML = `You receive <strong>KES ${selected.payout.toLocaleString()}</strong> · Queue position activates immediately`;
        }

        // Process payment
        function processPayment() {
            if (!selectedAmount) {
                alert('Please select an amount first');
                return;
            }

            const link = paymentLinks[selectedAmount];
            if (link) {
                window.open(link, '_blank');
            } else {
                alert('Payment link not found');
            }
        }

        // Page switching
        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById('page-' + pageId).classList.add('active');
            
            document.querySelectorAll('.nav-links a').forEach(a => a.classList.remove('active'));
            document.getElementById('nav-' + pageId).classList.add('active');
        }

        // Initialize
        generateAmountGrid();
    </script>
</body>
</html>
